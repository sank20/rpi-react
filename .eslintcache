[{"C:\\Users\\Sanket\\rpi-frontend\\rpi-react\\src\\index.js":"1","C:\\Users\\Sanket\\rpi-frontend\\rpi-react\\src\\App.js":"2","C:\\Users\\Sanket\\rpi-frontend\\rpi-react\\src\\reportWebVitals.js":"3","C:\\Users\\Sanket\\rpi-frontend\\rpi-react\\src\\DeleteButton.js":"4"},{"size":546,"mtime":1607380303353,"results":"5","hashOfConfig":"6"},{"size":7837,"mtime":1608529436498,"results":"7","hashOfConfig":"6"},{"size":362,"mtime":499162500000,"results":"8","hashOfConfig":"6"},{"size":3138,"mtime":1608423948024,"results":"9","hashOfConfig":"6"},{"filePath":"10","messages":"11","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"12"},"z1giy6",{"filePath":"13","messages":"14","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"15","messages":"16","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"12"},{"filePath":"17","messages":"18","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"19","usedDeprecatedRules":"12"},"C:\\Users\\Sanket\\rpi-frontend\\rpi-react\\src\\index.js",[],["20","21"],"C:\\Users\\Sanket\\rpi-frontend\\rpi-react\\src\\App.js",["22","23","24","25","26","27"],"C:\\Users\\Sanket\\rpi-frontend\\rpi-react\\src\\reportWebVitals.js",[],"C:\\Users\\Sanket\\rpi-frontend\\rpi-react\\src\\DeleteButton.js",["28","29","30"],"import React, { Component } from \"react\";\r\n// import DropdownButton from \"react-bootstrap/DropdownButton\";\r\nimport Dropdown from \"react-bootstrap/Dropdown\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport ButtonGroup from \"react-bootstrap/ButtonGroup\";\r\n\r\nclass DeleteButton extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      deleteLabel: \"Select file to delete ->\",\r\n      fileDropDownList: [],\r\n      deleteFileName: null,\r\n      newUpload: props.newUpload,\r\n    };\r\n  }\r\n\r\n// TODO: Clear all warnings, use recommended stuff\r\n  baseUrl = \"http://192.168.0.42:8000\";\r\n  getAllFiles = () => {\r\n    let url = `${this.baseUrl}/music/music_files`;\r\n    return fetch(url, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n      },\r\n    });\r\n  };\r\n\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    //   console.log(\"new upload caught in child component\");\r\n    //   console.log(this.props.newUpload);\r\n    //   console.log(prevProps.newUpload);\r\n    if (this.props.newUpload == true && prevProps.newUpload==false ) {\r\n      populateFiles(this);\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    populateFiles(this);\r\n  }\r\n\r\n  changeButtonLabel = (fileName) => (e) => {\r\n    console.log(\" trying to delete : \" + fileName);\r\n    this.setState({\r\n      deleteLabel: \"Delete '\" + fileName + \"'\",\r\n      deleteFileName: fileName,\r\n    });\r\n  };\r\n\r\n  deleteFile = () => {\r\n    let url = `${this.baseUrl}/music/file?filename=${this.state.deleteFileName}`;\r\n    // console.log(url);\r\n    fetch(url, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        \"Access-Control-Allow-Origin\": \"*\",\r\n      },\r\n    })\r\n      // .then((result) => result.json())\r\n      .then((result) => {\r\n        this.setState({\r\n          deleteLabel: \"Select file to delete ->\",\r\n        });\r\n        alert(\"File deleted successfully\");\r\n        populateFiles(this);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        alert(\"Something went wrong, please select an audio file\");\r\n      });\r\n  };\r\n  render() {\r\n    // console.log(\"in render\");\r\n    const { fileDropDownList } = this.state;\r\n\r\n    return (\r\n      <Dropdown as={ButtonGroup}>\r\n        <Button variant=\"danger\" onClick={this.deleteFile}>\r\n          {this.state.deleteLabel}{\" \"}\r\n        </Button>\r\n\r\n        <Dropdown.Toggle split variant=\"danger\" id=\"dropdown-split-basic\" />\r\n\r\n        <Dropdown.Menu>{this.state.fileDropDownList}</Dropdown.Menu>\r\n      </Dropdown>\r\n    );\r\n  }\r\n}\r\nfunction populateFiles(context) {\r\n  context\r\n    .getAllFiles()\r\n    .then((result) => result.json())\r\n    .then((result) => {\r\n      const dropDownButtons = result.map((fileName, index) => {\r\n        return (\r\n          <Dropdown.Item\r\n            key={index}\r\n            onClick={context.changeButtonLabel(fileName)}\r\n          >\r\n            {fileName}\r\n          </Dropdown.Item>\r\n        );\r\n      });\r\n      context.setState({\r\n        fileDropDownList: dropDownButtons,\r\n        newUpload: false,\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n}\r\n\r\nexport default DeleteButton;\r\n",{"ruleId":"31","replacedBy":"32"},{"ruleId":"33","replacedBy":"34"},{"ruleId":"35","severity":1,"message":"36","line":146,"column":26,"nodeType":"37","messageId":"38","endLine":146,"endColumn":28},{"ruleId":"35","severity":1,"message":"36","line":160,"column":40,"nodeType":"37","messageId":"38","endLine":160,"endColumn":42},{"ruleId":"35","severity":1,"message":"36","line":203,"column":41,"nodeType":"37","messageId":"38","endLine":203,"endColumn":43},{"ruleId":"35","severity":1,"message":"36","line":208,"column":40,"nodeType":"37","messageId":"38","endLine":208,"endColumn":42},{"ruleId":"35","severity":1,"message":"36","line":209,"column":39,"nodeType":"37","messageId":"38","endLine":209,"endColumn":41},{"ruleId":"35","severity":1,"message":"36","line":240,"column":53,"nodeType":"37","messageId":"38","endLine":240,"endColumn":55},{"ruleId":"35","severity":1,"message":"36","line":35,"column":30,"nodeType":"37","messageId":"38","endLine":35,"endColumn":32},{"ruleId":"35","severity":1,"message":"36","line":35,"column":60,"nodeType":"37","messageId":"38","endLine":35,"endColumn":62},{"ruleId":"39","severity":1,"message":"40","line":75,"column":13,"nodeType":"41","messageId":"42","endLine":75,"endColumn":29},"no-native-reassign",["43"],"no-negated-in-lhs",["44"],"eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","no-unused-vars","'fileDropDownList' is assigned a value but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation"]